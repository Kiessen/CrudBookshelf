const Books=[],RENDER_EVENT="render-todo",SAVED_EVENT="saved-books",STORAGE_KEY="Books_APPS";function generateId(){const temp=new Date;return temp.getTime()}function generateBooksObject(id,title,author,year,isCompleted){return{id:id,title:title,author:author,year:year,isCompleted:isCompleted}}function findTitle(Title){const arr=[];for(BookItem of Books)BookItem.title===Title&&arr.push(BookItem);return arr}function findBook(BookId){for(BookItem of Books)if(BookItem.id===BookId)return BookItem;return null}function findTodoIndex(BookId){for(index in Books)if(Books[index].id===BookId)return index;return-1}function makeBook(BooksObject){const{id:id,title:title,author:author,year:year,isCompleted:isCompleted}=BooksObject,textTitle=document.createElement("h3");textTitle.innerText=title;const image=document.createElement("img");image.setAttribute("src","./book.png");const textAuthor=document.createElement("p");textAuthor.innerText=`Penulis : ${author}`;const textYear=document.createElement("p");textYear.innerText=`Tahun: ${year}`;const buttonContainer=document.createElement("div");buttonContainer.classList.add("action");const container=document.createElement("article");container.classList.add("book_item","FlexBox2"),container.append(textTitle,textAuthor,textYear,buttonContainer),container.setAttribute("id",`todo-${id}`);const flexContainer=document.createElement("div");if(flexContainer.classList.add("FlexContainer"),flexContainer.append(image,container),isCompleted){const undoButton=document.createElement("button");undoButton.innerText="Belum selesai dibaca",undoButton.classList.add("green"),undoButton.addEventListener("click",(function(){undoBookFromCompleted(id)}));const trashButton=document.createElement("button");trashButton.innerText="Hapus Buku",trashButton.classList.add("red"),trashButton.addEventListener("click",(function(){removeBookFromCompleted(id)})),buttonContainer.append(undoButton,trashButton)}else{const checkButton=document.createElement("button");checkButton.innerText="selesai dibaca",checkButton.classList.add("green"),checkButton.addEventListener("click",(function(){addBookToCompleted(id)}));const trashButton=document.createElement("button");trashButton.innerText="Hapus Buku",trashButton.classList.add("red"),trashButton.addEventListener("click",(function(){removeBookFromCompleted(id)})),buttonContainer.append(checkButton,trashButton)}return flexContainer}function bookSearch(){const textTitle=document.getElementById("searchBookTitle").value,gotTitle=findTitle(textTitle);if(clearInput(),0!==gotTitle.length)for(x of gotTitle){console.log(x);const{title:title,author:author,year:year}=x,textTitle=document.createElement("td");textTitle.innerText=title;const textAuthor=document.createElement("td");textAuthor.innerText=author;const textYear=document.createElement("td");textYear.innerText=year;const container=document.createElement("tr");container.classList.add("isiListSearch"),container.append(textTitle,textAuthor,textYear);const articleContainer=document.getElementById("searchList");articleContainer.removeAttribute("hidden"),articleContainer.append(container)}else clearInput(),window.alert(`${textTitle} tidak ada`);return null}function addBook(){const textTitle=document.getElementById("inputBookTitle").value,author=document.getElementById("inputBookAuthor").value,year=document.getElementById("inputBookYear").value,BookIsComplete=document.getElementById("inputBookIsComplete").checked;console.log(BookIsComplete);const generatedID=generateId(),BooksObject=generateBooksObject(generatedID,textTitle,author,year,BookIsComplete);Books.push(BooksObject),document.dispatchEvent(new Event(RENDER_EVENT)),saveData()}function addBookToCompleted(BookId){const BookTarget=findBook(BookId);null!=BookTarget&&(BookTarget.isCompleted=!0,document.dispatchEvent(new Event(RENDER_EVENT)),saveData())}function removeBookFromCompleted(BookId){const BookTarget=findTodoIndex(BookId);-1!==BookTarget&&(Books.splice(BookTarget,1),document.dispatchEvent(new Event(RENDER_EVENT)),saveData())}function undoBookFromCompleted(BookId){const BookTarget=findBook(BookId);null!=BookTarget&&(BookTarget.isCompleted=!1,document.dispatchEvent(new Event(RENDER_EVENT)),saveData())}function clearInput(){const inputTextAll=document.querySelectorAll("input"),elem=document.querySelectorAll(".isiListSearch");for(x of elem)x.remove();for(input of inputTextAll)document.getElementById(input.id).value=""}function isStorageExist(){return void 0!==typeof Storage||(alert("Browser kamu tidak mendukung local storage"),!1)}function saveData(){if(isStorageExist()){const parsed=JSON.stringify(Books);localStorage.setItem(STORAGE_KEY,parsed),document.dispatchEvent(new Event(SAVED_EVENT))}}function loadDataFromStorage(){const serializedData=localStorage.getItem(STORAGE_KEY);let data=JSON.parse(serializedData);if(null!==data)for(const book of data)Books.push(book);document.dispatchEvent(new Event(RENDER_EVENT))}document.addEventListener("DOMContentLoaded",(function(){const submitForm=document.getElementById("inputBook"),searchForm=document.getElementById("searchBook");submitForm.addEventListener("submit",(function(event){event.preventDefault(),addBook()})),searchForm.addEventListener("submit",(function(event){event.preventDefault(),bookSearch()}))})),document.addEventListener(SAVED_EVENT,(function(){console.log(localStorage.getItem(STORAGE_KEY))})),document.addEventListener("DOMContentLoaded",(function(){isStorageExist()&&loadDataFromStorage()})),document.addEventListener(RENDER_EVENT,(function(){const uncompletedBOOKSList=document.getElementById("incompleteBookshelfList"),BooksList=document.getElementById("completeBookshelfList"),articleContainer=document.getElementById("searchList");for(BookItem of(uncompletedBOOKSList.innerHTML="",BooksList.innerHTML="",clearInput(),articleContainer.setAttribute("hidden",!0),Books)){const BookElement=makeBook(BookItem);BookItem.isCompleted?BooksList.append(BookElement):uncompletedBOOKSList.append(BookElement)}}));